<!DOCTYPE html>
<html>
<head>
    <title>User Mental Insight Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body style="font-family: Arial; padding: 20px;">

    <h1>Mental Health Dashboard</h1>
    
    <h3>Sentiment Summary</h3>
    <div style="max-width: 400px; margin: auto;">
    <canvas id="sentimentChart"></canvas>
    </div>

    <h2>Latest Psychometric Test Result:</h2>
    <p>Score: {{ latest_result.total_score }}</p>
    <p>Mental State: {{ latest_result.category }}</p>


 <!-- <h3>Sentiment Trend</h3>
    <div style="width: 100%; max-width: 700px; margin: auto;">
    <canvas id="sentimentLineChart"></canvas>
    </div>-->  



    <h3>Recent Messages</h3>
    <ul>
        {% for item in mood_data %}
            <li>
                "{{ item.message }}" â†’ <strong>{{ item.sentiment }}</strong> 
                ({{ item.time|date:"M d, H:i" }})
            </li>
        {% endfor %}
    </ul>

    <script>
        const data = {
            labels: Object.keys({{ sentiment_counts|safe }}),
            datasets: [{
                label: 'Sentiment Count',
                data: Object.values({{ sentiment_counts|safe }}),
                backgroundColor: ['#4caf50', '#f44336', '#9e9e9e'],
            }]
        };

        new Chart(
            document.getElementById('sentimentChart'),
            {
                type: 'pie',
                data: data
            }
        );
    </script>

</body>
</html>

<!--const lineCtx = document.getElementById('sentimentLineChart').getContext('2d');
    const sentimentLineChart = new Chart(lineCtx, {
        type: 'line',
        data: {
            labels: {{ timestamps|safe }},
            datasets: [{
                label: 'Sentiment Score',
                data: {{ sentiment_scores|safe }},
                fill: false,
                borderColor: '#007bff',
                tension: 0.3
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    min: -1,
                    max: 1,
                    ticks: {
                        callback: function(value) {
                            if (value === 1) return 'Positive';
                            if (value === 0) return 'Neutral';
                            if (value === -1) return 'Negative';
                            return value;
                        }
                    }
                }
            }
        }
    });-->
